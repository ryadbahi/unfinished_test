<mat-toolbar class="matoolB">
  <h1 style="font-size: 28px">Sinistres</h1>
</mat-toolbar>
<div style="margin: 0.5rem 0 4rem 0">
  <mat-toolbar class="hiddenTB">
    <div class="selectSous">
      <mat-form-field style="overflow: hidden">
        <mat-select
          placeholder="Selectionez un contrat"
          style="
            font-size: 16px;
            font-weight: bolder;

            margin-bottom: 8px;
          "
          (click)="getcontrats()"
          (selectionChange)="onContratSelectionChange($event)"
        >
          <mat-option *ngIf="isLoading" disabled style="width: 25 rem">
            <mat-progress-spinner
              mode="indeterminate"
              diameter="20"
            ></mat-progress-spinner>
            Chargement...
          </mat-option>
          <mat-option
            *ngFor="let element of contrat_data"
            [value]="element.id_contrat"
            [disabled]="isLoading"
          >
            {{ element.nom_souscript }} :
            {{ element.num_contrat }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <div class="selectedContratTable" *ngIf="selectedContrat" [@fadeInOut]>
        <div class="content">
          <table class="detailsContratTable">
            <tbody class="tbdTable">
              <tr>
                <td>
                  Date d'effet :
                  {{ selectedContrat.date_effet | date : "dd/MM/yyyy" }}
                </td>
                <td>
                  Date d'échéance :
                  {{ selectedContrat.date_exp | date : "dd/MM/yyyy" }}
                </td>
                <td>
                  Prime net :
                  {{ selectedContrat.prime_total | number : "1.2-2" }}
                  DA
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </mat-toolbar>
</div>
<div>
  <mat-toolbar class="declaTB">
    <div class="form_container">
      <form [formGroup]="dptsinForm">
        <mat-form-field>
          <input
            formControlName="nom_souscript"
            matInput
            placeholder="Raison sociale"
            readonly
          />
        </mat-form-field>
        <mat-form-field>
          <input
            formControlName="nom_souscript"
            matInput
            placeholder="Raison sociale"
          />
        </mat-form-field>

        <mat-form-field>
          <input
            formControlName="nom_souscript"
            matInput
            placeholder="Raison sociale"
          />
        </mat-form-field>

        <mat-form-field>
          <input
            formControlName="nom_souscript"
            matInput
            placeholder="Raison sociale"
          />
        </mat-form-field>
      </form>
    </div>
  </mat-toolbar>
</div>

<div style="border-radius: 10px; overflow: hidden">
  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="idx">
      <th mat-header-cell *matHeaderCellDef>N°</th>
      <td mat-cell *matCellDef="let element">
        {{ element.idx }}
      </td>
    </ng-container>

    <ng-container matColumnDef="num_opt">
      <th mat-header-cell *matHeaderCellDef>Option</th>
      <td mat-cell *matCellDef="let element">
        {{ element.num_opt }}
      </td>
    </ng-container>

    <ng-container matColumnDef="nom_adherent">
      <th mat-header-cell *matHeaderCellDef>Nom</th>
      <td mat-cell *matCellDef="let element">
        {{ element.nom_adherent }}
      </td>
    </ng-container>

    <ng-container matColumnDef="prenom_adherent">
      <th mat-header-cell *matHeaderCellDef>Prénom</th>
      <td mat-cell *matCellDef="let element">
        {{ element.prenom_adherent }}
      </td>
    </ng-container>

    <ng-container matColumnDef="lien_benef">
      <th mat-header-cell *matHeaderCellDef>Lien</th>
      <td mat-cell *matCellDef="let element">
        {{ element.lien_benef }}
      </td>
    </ng-container>

    <ng-container matColumnDef="prenom_benef">
      <th mat-header-cell *matHeaderCellDef>Prenom bénéf.</th>
      <td mat-cell *matCellDef="let element">
        {{ element.prenom_benef }}
      </td>
    </ng-container>

    <ng-container matColumnDef="date_sin">
      <th mat-header-cell *matHeaderCellDef>Date de sin.</th>
      <td mat-cell *matCellDef="let element">
        {{ element.date_sin | date : "dd/MM/yyyy" }}
      </td>
    </ng-container>

    <ng-container matColumnDef="garantie_describ">
      <th mat-header-cell *matHeaderCellDef>Acte</th>
      <td mat-cell *matCellDef="let element">
        {{ element.code_garantie }} : {{ element.garantie_describ }}
      </td>
    </ng-container>

    <ng-container matColumnDef="frais_sin">
      <th mat-header-cell *matHeaderCellDef>Frais</th>
      <td mat-cell *matCellDef="let element">
        {{ element.frais_sin | number : "1.2-2" }}
      </td>
    </ng-container>

    <ng-container matColumnDef="rbt_sin">
      <th mat-header-cell *matHeaderCellDef>Remb.</th>
      <td mat-cell *matCellDef="let element">
        {{ element.rbt_sin | number : "1.2-2" }}
      </td>
    </ng-container>

    <ng-container matColumnDef="obs_sin">
      <th mat-header-cell *matHeaderCellDef>Obs.</th>
      <td mat-cell *matCellDef="let element">
        {{ element.obs_sin }}
      </td>
    </ng-container>

    <ng-container matColumnDef="rib">
      <th mat-header-cell *matHeaderCellDef>RIB</th>
      <td mat-cell *matCellDef="let element">
        {{ element.rib }}
      </td>
    </ng-container>

    <ng-container matColumnDef="statut">
      <th mat-header-cell *matHeaderCellDef>Forced ?</th>
      <td mat-cell *matCellDef="let element">
        {{ element.statut }}
      </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Édit/Suppr.</th>
      <td mat-cell *matCellDef="let element">
        {{ element.actions }}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
